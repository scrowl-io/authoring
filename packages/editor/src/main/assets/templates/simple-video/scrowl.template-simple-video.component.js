"use strict";(self.webpackChunk_scrowl_template_simple_video=self.webpackChunk_scrowl_template_simple_video||[]).push([[755],{914:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var n=o(24),s=o.n(n),c=o(530),a=o(325),l=o(232),r=o.n(l),i=o(490);const u=({id:e,schema:t,...o})=>{const l=window.Scrowl;let u="template-simple-video";const d=l.core.Markdown,m=!!o.editMode,v=m?o.focusElement:null,p=`${e}-simple-video`,w=t.content.text.value,E="text"===v&&"has-focus",f=t.content.videoAsset.content.assetUrl?.value,h=t.content.videoAsset.content.webUrl?.value,g=t.content.videoAsset.content.alt.value||"",_="videoAsset.url"===v&&"has-focus",y=(0,n.useRef)(null),b="right"===t.content.options.content.alignment.value?"right":"left",N=t.controlOptions.disableAnimations?.value,$=!N&&t.content.options.content.showProgress.value,x=(0,n.useRef)($),A=(0,n.useRef)(0),[M,P]=(0,n.useState)({width:$?"0%":"100%"}),[k,S]=(0,n.useState)(!1),R=(0,n.useRef)("");let C;h&&(h.includes("youtube.com")&&(R.current="youtube",C=h.replace("https://www.youtube.com/watch?v=","")),h.includes("vimeo.com")&&(R.current="vimeo",C=h.replace("https://vimeo.com/","")),h.includes("dailymotion.com")&&(R.current="dailymotion",C=h.replace("https://www.dailymotion.com/video/",""))),$&&(u+=" show-progress");(0,n.useEffect)((()=>{x.current=$,P({...M,width:$?`${A.current}%`:"100%"})}),[$]);const D=e=>{const t=new CustomEvent("videoEnded",{detail:e});document.dispatchEvent(t),console.log("custom event",t)},I=e=>{console.log("finished"),D(e)},U=e=>{console.log("PAUSED",e),"vimeo"===R.current&&e.data.duration===e.data.seconds&&(console.log("finished"),D(e))};return s().createElement(l.core.Template,{id:`slide-${p}`,className:u,onProgress:e=>{N||(A.current=e.progress,x.current&&P({...M,width:`${e.progress}%`}))},onEnd:()=>{N||(A.current=100,x.current&&P({...M,width:"100%"}))},notScene:!!N,...o},s().createElement("div",{id:p,className:"owlui-container"},s().createElement("div",{className:`owlui-row ${b}`},s().createElement("div",{className:"owlui-col text__wrapper"},s().createElement("div",{className:"text__container"},s().createElement("div",{className:"progress-indictor"},s().createElement("div",{className:"progress-bar",style:M})),s().createElement("div",{className:`text__value can-focus ${E}`,onMouseDown:()=>{m&&l.core.host.sendMessage({type:"focus",field:"text"})}},s().createElement(d,null,w))))),(f||h)&&s().createElement("div",{ref:y,className:`video__wrapper ${b} can-focus ${_} as-side`,onMouseDown:()=>{m&&l.core.host.sendMessage({type:"focus",field:"bgImage.url"})}},h&&!f&&s().createElement("div",null,C&&"youtube"===R.current&&s().createElement(a.Z,{videoId:C,onPause:U,onEnd:I}),C&&"dailymotion"===R.current&&s().createElement(i.Z,{onEnd:I,video:C,autoplay:!1,showQueue:!1,autoplayQueue:!1}),C&&"vimeo"===R.current&&s().createElement(r(),{className:"vimeo-player",autoplay:!0,videoId:C,onEnd:I,paused:!0,loop:!1,onPause:U})),f&&!h&&s().createElement(c.ZP,{offset:250},s().createElement("video",{controls:!0,onEnded:D,className:"video__container","aria-label":g},s().createElement("source",{src:f}))))))}}}]);
//# sourceMappingURL=scrowl.template-simple-video.component.js.map